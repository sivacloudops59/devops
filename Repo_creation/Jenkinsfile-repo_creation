pipeline {
    agent any

    parameters {
        string(name: 'REPO_NAME', defaultValue: 'my-auto-repo', description: 'GitHub repository name')
        string(name: 'BRANCH_NAME', defaultValue: 'dev', description: 'Branch to create')
    }

    environment {
        GITHUB_TOKEN = credentials('github-token-id')       // Jenkins credential ID
        GITHUB_USERNAME = 'your-github-username'            // hardcoded or env var
    }

    stages {
        stage('Setup Python Environment') {
            steps {
                sh '''
                    python3 -m venv venv
                    . venv/bin/activate
                    pip install requests
                '''
            }
        }

        stage('Create Repository') {
                  outputlog = sh(script:" python Repo_creation/create_repo.py ${GITHUB_PWD} ${repo_name}", returnStdout:true).trim()
                  echo "${outputlog}"
        }
        stage('create Branch'){
            outputlog= sh(script:" python Repo_creation/create_branch.py ${GITHUB_PWD} ${repo_name}", returnStdout:true).trim()
        }
    }
}
